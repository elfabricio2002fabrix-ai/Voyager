// Internationalization (i18n) Configuration
export const i18nConfig = {
  defaultLocale: 'es',
  locales: ['es', 'en', 'fr', 'de', 'it', 'pt', 'ja', 'zh'],
  fallbackLocale: 'en',
}

// Translation strings
export const translations = {
  es: {
    common: {
      welcome: 'Bienvenido',
      search: 'Buscar',
      login: 'Iniciar SesiÃ³n',
      logout: 'Cerrar SesiÃ³n',
      signup: 'Registrarse',
      save: 'Guardar',
      cancel: 'Cancelar',
      delete: 'Eliminar',
      edit: 'Editar',
      share: 'Compartir',
      loading: 'Cargando...',
      error: 'Error',
      success: 'Ã‰xito',
    },
    nav: {
      home: 'Inicio',
      discover: 'Descubrir',
      bucketList: 'Bucket List',
      myTrips: 'Mis Viajes',
      gallery: 'GalerÃ­a',
      profile: 'Perfil',
      chat: 'Chat',
    },
    home: {
      hero: {
        title: 'Explora el Mundo',
        subtitle: 'Descubre destinos increÃ­bles, planifica aventuras Ã©picas y crea recuerdos inolvidables',
        cta: 'Comenzar a Explorar',
      },
      stats: {
        countries: 'PaÃ­ses Visitados',
        cities: 'Ciudades Exploradas',
        photos: 'Fotos Capturadas',
        adventures: 'Aventuras Planeadas',
      },
    },
    booking: {
      title: 'Reservar Viaje',
      destination: 'Destino',
      dates: 'Fechas',
      travelers: 'Viajeros',
      adults: 'Adultos',
      children: 'NiÃ±os',
      price: 'Precio',
      total: 'Total',
      confirm: 'Confirmar Reserva',
      success: 'Â¡Reserva confirmada!',
    },
    payment: {
      cardNumber: 'NÃºmero de Tarjeta',
      expiry: 'Vencimiento',
      cvv: 'CVV',
      pay: 'Pagar',
      processing: 'Procesando pago...',
    },
  },
  en: {
    common: {
      welcome: 'Welcome',
      search: 'Search',
      login: 'Login',
      logout: 'Logout',
      signup: 'Sign Up',
      save: 'Save',
      cancel: 'Cancel',
      delete: 'Delete',
      edit: 'Edit',
      share: 'Share',
      loading: 'Loading...',
      error: 'Error',
      success: 'Success',
    },
    nav: {
      home: 'Home',
      discover: 'Discover',
      bucketList: 'Bucket List',
      myTrips: 'My Trips',
      gallery: 'Gallery',
      profile: 'Profile',
      chat: 'Chat',
    },
    home: {
      hero: {
        title: 'Explore the World',
        subtitle: 'Discover amazing destinations, plan epic adventures, and create unforgettable memories',
        cta: 'Start Exploring',
      },
      stats: {
        countries: 'Countries Visited',
        cities: 'Cities Explored',
        photos: 'Photos Captured',
        adventures: 'Adventures Planned',
      },
    },
    booking: {
      title: 'Book Trip',
      destination: 'Destination',
      dates: 'Dates',
      travelers: 'Travelers',
      adults: 'Adults',
      children: 'Children',
      price: 'Price',
      total: 'Total',
      confirm: 'Confirm Booking',
      success: 'Booking confirmed!',
    },
    payment: {
      cardNumber: 'Card Number',
      expiry: 'Expiry',
      cvv: 'CVV',
      pay: 'Pay',
      processing: 'Processing payment...',
    },
  },
  fr: {
    common: {
      welcome: 'Bienvenue',
      search: 'Rechercher',
      login: 'Connexion',
      logout: 'DÃ©connexion',
      signup: 'S\'inscrire',
      save: 'Enregistrer',
      cancel: 'Annuler',
      delete: 'Supprimer',
      edit: 'Modifier',
      share: 'Partager',
      loading: 'Chargement...',
      error: 'Erreur',
      success: 'SuccÃ¨s',
    },
    nav: {
      home: 'Accueil',
      discover: 'DÃ©couvrir',
      bucketList: 'Liste de Souhaits',
      myTrips: 'Mes Voyages',
      gallery: 'Galerie',
      profile: 'Profil',
      chat: 'Chat',
    },
  },
  de: {
    common: {
      welcome: 'Willkommen',
      search: 'Suchen',
      login: 'Anmelden',
      logout: 'Abmelden',
      signup: 'Registrieren',
      save: 'Speichern',
      cancel: 'Abbrechen',
      delete: 'LÃ¶schen',
      edit: 'Bearbeiten',
      share: 'Teilen',
      loading: 'Laden...',
      error: 'Fehler',
      success: 'Erfolg',
    },
    nav: {
      home: 'Startseite',
      discover: 'Entdecken',
      bucketList: 'Wunschliste',
      myTrips: 'Meine Reisen',
      gallery: 'Galerie',
      profile: 'Profil',
      chat: 'Chat',
    },
  },
  it: {
    common: {
      welcome: 'Benvenuto',
      search: 'Cerca',
      login: 'Accedi',
      logout: 'Esci',
      signup: 'Registrati',
      save: 'Salva',
      cancel: 'Annulla',
      delete: 'Elimina',
      edit: 'Modifica',
      share: 'Condividi',
      loading: 'Caricamento...',
      error: 'Errore',
      success: 'Successo',
    },
    nav: {
      home: 'Home',
      discover: 'Scopri',
      bucketList: 'Lista dei Desideri',
      myTrips: 'I Miei Viaggi',
      gallery: 'Galleria',
      profile: 'Profilo',
      chat: 'Chat',
    },
  },
  pt: {
    common: {
      welcome: 'Bem-vindo',
      search: 'Pesquisar',
      login: 'Entrar',
      logout: 'Sair',
      signup: 'Cadastrar',
      save: 'Salvar',
      cancel: 'Cancelar',
      delete: 'Excluir',
      edit: 'Editar',
      share: 'Compartilhar',
      loading: 'Carregando...',
      error: 'Erro',
      success: 'Sucesso',
    },
    nav: {
      home: 'InÃ­cio',
      discover: 'Descobrir',
      bucketList: 'Lista de Desejos',
      myTrips: 'Minhas Viagens',
      gallery: 'Galeria',
      profile: 'Perfil',
      chat: 'Chat',
    },
  },
  ja: {
    common: {
      welcome: 'ã‚ˆã†ã“ã',
      search: 'æ¤œç´¢',
      login: 'ãƒ­ã‚°ã‚¤ãƒ³',
      logout: 'ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ',
      signup: 'ç™»éŒ²',
      save: 'ä¿å­˜',
      cancel: 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«',
      delete: 'å‰Šé™¤',
      edit: 'ç·¨é›†',
      share: 'å…±æœ‰',
      loading: 'èª­ã¿è¾¼ã¿ä¸­...',
      error: 'ã‚¨ãƒ©ãƒ¼',
      success: 'æˆåŠŸ',
    },
    nav: {
      home: 'ãƒ›ãƒ¼ãƒ ',
      discover: 'ç™ºè¦‹',
      bucketList: 'ãƒã‚±ãƒƒãƒˆãƒªã‚¹ãƒˆ',
      myTrips: 'ãƒžã‚¤ãƒˆãƒªãƒƒãƒ—',
      gallery: 'ã‚®ãƒ£ãƒ©ãƒªãƒ¼',
      profile: 'ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«',
      chat: 'ãƒãƒ£ãƒƒãƒˆ',
    },
  },
  zh: {
    common: {
      welcome: 'æ¬¢è¿Ž',
      search: 'æœç´¢',
      login: 'ç™»å½•',
      logout: 'ç™»å‡º',
      signup: 'æ³¨å†Œ',
      save: 'ä¿å­˜',
      cancel: 'å–æ¶ˆ',
      delete: 'åˆ é™¤',
      edit: 'ç¼–è¾‘',
      share: 'åˆ†äº«',
      loading: 'åŠ è½½ä¸­...',
      error: 'é”™è¯¯',
      success: 'æˆåŠŸ',
    },
    nav: {
      home: 'é¦–é¡µ',
      discover: 'å‘çŽ°',
      bucketList: 'å¿ƒæ„¿å•',
      myTrips: 'æˆ‘çš„æ—…è¡Œ',
      gallery: 'ç”»å»Š',
      profile: 'ä¸ªäººèµ„æ–™',
      chat: 'èŠå¤©',
    },
  },
}

// i18n Service
class I18nService {
  constructor() {
    this.currentLocale = i18nConfig.defaultLocale
    this.translations = translations
    this.listeners = []
  }

  // Get translation
  t(key, params = {}) {
    const keys = key.split('.')
    let value = this.translations[this.currentLocale]

    for (const k of keys) {
      value = value?.[k]
      if (!value) break
    }

    // Fallback to default locale
    if (!value) {
      value = this.translations[i18nConfig.fallbackLocale]
      for (const k of keys) {
        value = value?.[k]
        if (!value) break
      }
    }

    // Still no value, return key
    if (!value) return key

    // Replace parameters
    return this.replacePlaceholders(value, params)
  }

  replacePlaceholders(text, params) {
    return text.replace(/\{(\w+)\}/g, (match, key) => {
      return params[key] !== undefined ? params[key] : match
    })
  }

  // Change locale
  setLocale(locale) {
    if (i18nConfig.locales.includes(locale)) {
      this.currentLocale = locale
      localStorage.setItem('voyager_locale', locale)
      this.notifyListeners()
    }
  }

  // Get current locale
  getLocale() {
    return this.currentLocale
  }

  // Subscribe to locale changes
  subscribe(callback) {
    this.listeners.push(callback)
    return () => {
      this.listeners = this.listeners.filter((cb) => cb !== callback)
    }
  }

  notifyListeners() {
    this.listeners.forEach((callback) => callback(this.currentLocale))
  }

  // Format numbers
  formatNumber(number, options = {}) {
    return new Intl.NumberFormat(this.currentLocale, options).format(number)
  }

  // Format currency
  formatCurrency(amount, currency = 'USD') {
    return new Intl.NumberFormat(this.currentLocale, {
      style: 'currency',
      currency,
    }).format(amount)
  }

  // Format date
  formatDate(date, options = {}) {
    return new Intl.DateTimeFormat(this.currentLocale, options).format(new Date(date))
  }

  // Get available locales
  getAvailableLocales() {
    return i18nConfig.locales.map((code) => ({
      code,
      name: this.getLocaleName(code),
      flag: this.getLocaleFlag(code),
    }))
  }

  getLocaleName(code) {
    const names = {
      es: 'EspaÃ±ol',
      en: 'English',
      fr: 'FranÃ§ais',
      de: 'Deutsch',
      it: 'Italiano',
      pt: 'PortuguÃªs',
      ja: 'æ—¥æœ¬èªž',
      zh: 'ä¸­æ–‡',
    }
    return names[code] || code
  }

  getLocaleFlag(code) {
    const flags = {
      es: 'ðŸ‡ªðŸ‡¸',
      en: 'ðŸ‡ºðŸ‡¸',
      fr: 'ðŸ‡«ðŸ‡·',
      de: 'ðŸ‡©ðŸ‡ª',
      it: 'ðŸ‡®ðŸ‡¹',
      pt: 'ðŸ‡§ðŸ‡·',
      ja: 'ðŸ‡¯ðŸ‡µ',
      zh: 'ðŸ‡¨ðŸ‡³',
    }
    return flags[code] || 'ðŸŒ'
  }

  // Initialize from localStorage
  init() {
    const savedLocale = localStorage.getItem('voyager_locale')
    if (savedLocale && i18nConfig.locales.includes(savedLocale)) {
      this.currentLocale = savedLocale
    } else {
      // Detect browser language
      const browserLang = navigator.language.split('-')[0]
      if (i18nConfig.locales.includes(browserLang)) {
        this.currentLocale = browserLang
      }
    }
  }
}

export const i18n = new I18nService()
i18n.init()

export default i18n

// React Hook for i18n
import { useState, useEffect } from 'react'

export const useTranslation = () => {
  const [locale, setLocale] = useState(i18n.getLocale())

  useEffect(() => {
    const unsubscribe = i18n.subscribe((newLocale) => {
      setLocale(newLocale)
    })
    return unsubscribe
  }, [])

  const t = (key, params) => i18n.t(key, params)

  const changeLocale = (newLocale) => {
    i18n.setLocale(newLocale)
  }

  return {
    t,
    locale,
    changeLocale,
    availableLocales: i18n.getAvailableLocales(),
    formatNumber: (num, opts) => i18n.formatNumber(num, opts),
    formatCurrency: (amount, currency) => i18n.formatCurrency(amount, currency),
    formatDate: (date, opts) => i18n.formatDate(date, opts),
  }
}
